define(["jquery","jqueryui","core/log","core/templates","mod_poodlltime/definitions","mod_poodlltime/modalformhelper","mod_poodlltime/modaldeletehelper","mod_poodlltime/moveitemhelper","mod_poodlltime/datatables"],function(a,b,c,d,e,f,g,h,i){"use strict";return c.debug("RSQuestion manager: initialising"),{cmid:null,controls:null,init:function(a){var b=this;b.contextid=a.contextid,b.tableid=a.tableid,b.register_events(),b.process_html()},process_html:function(){this.controls=[],this.controls.questionstable=i.getDataTable(this.tableid),this.controls.questionscontainer=a("#"+e.mod_poodlltime_items_cont),this.controls.noquestionscontainer=a("#"+e.mod_poodlltime_noitems_cont),this.controls.movearrows=a("#"+e.movearrow)},register_events:function(){var b=this,i=([e.qtype_dictation,e.qtype_dictationchat,e.qtype_page,e.qtype_speechcards,e.qtype_listenrepeat,e.qtype_multichoice],function(a,b){"#"+e.itemrow+"_"+a;document.location.reload()}),j=function(c,d){var f="#"+e.itemrow+"_"+d;b.controls.questionstable.cell(a(f+" .c0")).data(c.name)},k=function(c,e){c.id=e,c.typelabel=c.type,d.render("mod_poodlltime/itemlistitem",c).then(function(c,d){b.controls.questionstable.row.add(a(c)[0]).draw()}),b.controls.noquestionscontainer.hide(),b.controls.questionscontainer.show()},l=function(a){c.debug("after question delete"),b.controls.questionstable.row("#"+e.itemrow+"_"+a).remove().draw();var d=b.controls.questionstable.rows().count();d||(b.controls.noquestionscontainer.show(),b.controls.questionscontainer.hide())};f.init("."+e.component+"_addlink",b.contextid,k),f.init("."+e.itemrow+"_editlink",b.contextid,j),g.init("."+e.itemrow+"_deletelink",b.contextid,"deleteitem",l),h.init("."+e.movearrow,b.contextid,i)}}});