define(["jquery","core/log","core/modal_factory","core/str","core/modal_events","mod_minilesson/definitions"],function(t,e,n,i,o,s){"use strict";return e.debug("Poodll Minilesson Finished page: initialising"),{strings:{},clone:function(){return t.extend(!0,{},this)},init:function(){this.init_strings(),this.register_events()},register_events(){var e=this;t("body").on("click",".btn_finished_attempt",function(i){i.preventDefault();var s=t(this).data("href");"reattempt"===t(this).data("action")?n.create({type:n.types.SAVE_CANCEL,title:e.strings.reattempttitle,body:e.strings.reattemptbody}).then(function(t){t.setSaveButtonText(e.strings.reattempt),t.getRoot().on(o.save,function(){window.location.href=s}),t.show()}):window.location.href=s})},init_strings:function(){var t=this;i.get_strings([{key:"reattempttitle",component:"mod_minilesson"},{key:"reattemptbody",component:"mod_minilesson"},{key:"reattempt",component:"mod_minilesson"}]).done(function(e){var n=0;t.strings.reattempttitle=e[n++],t.strings.reattemptbody=e[n++],t.strings.reattempt=e[n++]})}}});