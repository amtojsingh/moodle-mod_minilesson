{"version":3,"sources":["../src/activitycontroller.js"],"names":["define","$","jqui","log","def","recorderhelper","quizhelper","debug","cmid","activitydata","holderid","recorderid","playerid","sorryboxid","controls","ra_recorder","rec_time_start","passagefinished","clone","extend","init","props","dd","theid","widgetid","configcontrol","get","JSON","parse","value","remove","is_browser_ok","show","process_html","register_events","doquizlayout","opts","hider","introbox","quizcontainer","progresscontainer","feedbackcontainer","errorcontainer","passagecontainer","recordingcontainer","dummyrecorder","recordercontainer","instructionscontainer","recinstructionscontainerright","recinstructionscontainerleft","allowearlyexit","wheretonextcontainer","beginall","m","passagerecorded","navigator","mediaDevices","getUserMedia","setup_recorder","on_recording_start","Date","getTime","dopassagelayout","on_recording_end","now","douploadlayout","on_audio_processing","eventdata","rectime","Math","ceil","send_submission","mediaurl","filename","xhr","XMLHttpRequest","that","onreadystatechange","readyState","status","payload","responseText","payloadobject","success","message","attemptid","data","params","open","M","cfg","wwwroot","setRequestHeader","send","hide","addClass","fadeIn","fadeOut","onSubmit","returndata","dofinishedreadinglayout","quizdata","passagepictureurl","flower","append","picurl","doerrorlayout"],"mappings":"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","sourcesContent":["/* jshint ignore:start */\ndefine(['jquery','jqueryui', 'core/log','mod_poodlltime/definitions','mod_poodlltime/recorderhelper','mod_poodlltime/quizhelper'], function($, jqui, log, def, recorderhelper, quizhelper) {\n\n    \"use strict\"; // jshint ;_;\n\n    log.debug('Activity controller: initialising');\n\n    return {\n\n        cmid: null,\n        activitydata: null,\n        holderid: null,\n        recorderid: null,\n        playerid: null,\n        sorryboxid: null,\n        controls: null,\n        ra_recorder: null,\n        rec_time_start: 0,\n\n        //CSS in this file\n        passagefinished: def.passagefinished,\n\n        //for making multiple instances\n        clone: function(){\n            return $.extend(true,{},this);\n        },\n\n        //pass in config, the jquery video/audio object, and a function to be called when conversion has finshed\n        init: function(props){\n            var dd = this.clone();\n\n            //pick up opts from html\n            var theid='#amdopts_' + props.widgetid;\n            var configcontrol = $(theid).get(0);\n            if(configcontrol){\n                dd.activitydata = JSON.parse(configcontrol.value);\n                $(theid).remove();\n            }else{\n                //if there is no config we might as well give up\n                log.debug('Poodll Time Test Controller: No config found on page. Giving up.');\n                return;\n            }\n\n            dd.cmid = props.cmid;\n            dd.holderid = props.widgetid + '_holder';\n            dd.recorderid = props.widgetid + '_recorder';\n            dd.playerid = props.widgetid + '_player';\n            dd.sorryboxid = props.widgetid + '_sorrybox';\n\n            //if the browser doesn't support html5 recording.\n            //then warn and do not go any further\n            if(!dd.is_browser_ok()){\n                $('#' + dd.sorryboxid).show();\n                return;\n            }\n\n            //EITHER to show recorder FIRST , then on submit show quiz\n            //use dd.setup_recorder\n            //dd.setup_recorder();\n\n            dd.process_html();\n            dd.register_events();\n\n            //OR to show quiz and no recorder do dd.doquizlayout\n            dd.doquizlayout();\n        },\n\n\n\n        process_html: function(){\n            var opts = this.activitydata;\n            //these css classes/ids are all passed in from php in\n            //renderer.php::fetch_activity_amd\n            var controls ={\n                hider: $('.' + opts['hider']),\n                introbox: $('.' + 'mod_intro_box'),\n                quizcontainer: $('.' +  opts['quizcontainer']),\n                progresscontainer: $('.' +  opts['progresscontainer']),\n                feedbackcontainer: $('.' +  opts['feedbackcontainer']),\n                errorcontainer: $('.' +  opts['errorcontainer']),\n                passagecontainer: $('.' +  opts['passagecontainer']),\n                recordingcontainer: $('.' +  opts['recordingcontainer']),\n                dummyrecorder: $('.' +  opts['dummyrecorder']),\n                recordercontainer: $('.' +  opts['recordercontainer']),\n                instructionscontainer: $('.' +  opts['instructionscontainer']),\n                recinstructionscontainerright: $('.' +  opts['recinstructionscontainerright']),\n                recinstructionscontainerleft: $('.' +  opts['recinstructionscontainerleft']),\n                allowearlyexit: $('.' +  opts['allowearlyexit']),\n                wheretonextcontainer: $('.' +  opts['wheretonextcontainer'])\n            };\n            this.controls = controls;\n        },\n\n        beginall: function(){\n            var m = this;\n           // m.dorecord();\n            m.passagerecorded = true;\n        },\n\n        is_browser_ok: function(){\n            return (navigator && navigator.mediaDevices\n                && navigator.mediaDevices.getUserMedia);\n        },\n\n        setup_recorder: function(){\n            var dd = this;\n\n            //Set up the callback functions for the audio recorder\n\n            //originates from the recording:started event\n            //contains no meaningful data\n            //See https://api.poodll.com\n            var on_recording_start= function(eventdata){\n\n                dd.rec_time_start = new Date().getTime();\n                dd.dopassagelayout();\n                dd.controls.passagecontainer.show(1000,dd.beginall);\n            };\n\n            //originates from the recording:ended event\n            //contains no meaningful data\n            //See https://api.poodll.com\n            var on_recording_end= function(eventdata){\n                //its a bit hacky but the rec end event can arrive immed. somehow probably when the mic test ends\n                var now = new Date().getTime();\n                if((now - dd.rec_time_start) < 3000){\n                    return;\n                }\n                dd.douploadlayout();\n            };\n\n            //data sent here originates from the awaiting_processing event\n            //See https://api.poodll.com\n           var on_audio_processing= function(eventdata){\n                //at this point we know the submission has been uploaded and we know the fileURL\n               //so we send the submission\n               var now = new Date().getTime();\n               var rectime = now - dd.rec_time_start;\n               if(rectime > 0){\n                   rectime = Math.ceil(rectime/1000);\n               }\n               //this will trigger the quiz after submission and proceed to doquizlayout\n               //we need to get back the attemptid otherwise we would just proceed now\n               dd.send_submission(eventdata.mediaurl,rectime);\n\n            };\n\n            //init the recorder\n            recorderhelper.init(dd.activitydata,\n                on_recording_start,\n                on_recording_end,\n                on_audio_processing);\n        },\n\n        register_events: function() {\n            var dd = this;\n\n\t\t\t//events for other controls on the page\n            //ie not recorders\n            //dd.controls.passagecontainer.click(function(){log.debug('clicked');})\n        },\n\n        send_submission: function(filename,rectime){\n\n            //set up our ajax request\n            var xhr = new XMLHttpRequest();\n            var that = this;\n            \n            //set up our handler for the response\n            xhr.onreadystatechange = function(e){\n                if(this.readyState===4){\n                    if(xhr.status==200){\n                        log.debug('ok we got an attempt submission response');\n                        //get a yes or forgetit or tryagain\n                        var payload = xhr.responseText;\n                        var payloadobject = JSON.parse(payload);\n                        if(payloadobject){\n                            switch(payloadobject.success) {\n                                case false:\n                                    log.debug('attempted item evaluation failure');\n                                    if (payloadobject.message) {\n                                        log.debug('message: ' + payloadobject.message);\n                                    }\n\n                                case true:\n                                default:\n                                    log.debug('attempted submission accepted');\n                                    that.attemptid=payloadobject.data;\n                                    that.doquizlayout();\n                                    break;\n\n                            }\n                        }\n                     }else{\n                        log.debug('Not 200 response:' + xhr.status);\n                    }\n\n\n                }\n            };\n\n            var params = \"cmid=\" + that.cmid + \"&filename=\" + filename + \"&rectime=\" + rectime;\n            xhr.open(\"POST\",M.cfg.wwwroot + '/mod/poodlltime/ajaxhelper.php', true);\n            xhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\");\n            xhr.setRequestHeader(\"Cache-Control\", \"no-cache\");\n            xhr.send(params);\n        },\n\n        dopassagelayout: function(){\n            var m = this;\n            m.controls.introbox.hide();\n            m.controls.quizcontainer.hide();\n\n            //m.controls.instructionscontainer.hide();\n            if(m.controls.allowearlyexit){\n              //  m.controls.stopbutton.hide();\n            }\n        },\n        douploadlayout: function(){\n            var m = this;\n            m.controls.passagecontainer.addClass(m.passagefinished);\n            m.controls.hider.fadeIn('fast');\n            m.controls.progresscontainer.fadeIn('fast');\n        },\n\n        doquizlayout: function(){\n            var m = this;\n            m.controls.hider.fadeOut('fast');\n            m.controls.progresscontainer.fadeOut('fast');\n            m.controls.instructionscontainer.hide();\n            m.controls.passagecontainer.hide();\n            m.controls.recordingcontainer.hide();\n\n            //set up the quiz\n            quizhelper.onSubmit = function(returndata){m.dofinishedreadinglayout(returndata);};\n            quizhelper.init(m.controls.quizcontainer,this.activitydata.quizdata,this.cmid,this.attemptid,\n                this.activitydata.passagepictureurl);\n\n            //show the quiz\n            m.controls.quizcontainer.show();\n\n        },\n\n        dofinishedreadinglayout: function(returndata){\n            var m = this;\n            m.controls.quizcontainer.hide();\n            m.controls.feedbackcontainer.show();\n            if(returndata && returndata.success && returndata.data){\n                var flower = returndata.data;\n                m.controls.feedbackcontainer.append('<img src=\"' + flower.picurl + '\"></img>');\n            }\n            m.controls.wheretonextcontainer.show();\n\n        },\n        doerrorlayout: function(){\n            var m = this;\n            m.controls.hider.fadeOut('fast');\n            m.controls.progresscontainer.fadeOut('fast');\n            m.controls.passagecontainer.hide();\n            m.controls.recordingcontainer.hide();\n            m.controls.errorcontainer.show();\n            m.controls.wheretonextcontainer.show();\n        }\n    };//end of returned object\n});//total end\n"],"file":"activitycontroller.min.js"}