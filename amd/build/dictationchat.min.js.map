{"version":3,"sources":["../src/dictationchat.js"],"names":["define","$","log","ajax","def","polly","debug","clone","extend","usevoice","init","index","itemdata","quizhelper","self","register_events","setvoice","getItems","next_question","stepdata","hasgrade","totalitems","items","length","correctitems","filter","e","correct","grade","Math","round","do_next","uniqueid","on","start","game","pointer","audio","load","play","prop","text","target","setTimeout","answered","nextPrompt","end","check_answer","which","spliton","passage","transcriptArray","each","push","val","trim","transcript","join","getComparison","comparison","gotComparison","voices","language","voice","floor","random","text_items","customtext1","split","map","dictate_targetWords","typed","item","fetch_polly_url","then","audiourl","Audio","src","appReady","console","hide","show","removeClass","allCorrect","matched","addClass","forEach","obj","wordnumber","effect","realidx","data","dictate_targetWord","getWords","thetext","toLowerCase","chunks","words","i","match","callback","call","methodname","args","alternatives","done","ajaxresult","payloadobject","JSON","parse","fail","err","numCorrect","totalNum","html","spoken","code","replace","color","progress","idx","toggle","direction","nextReply","dictate_targetWordsCode","word","append","first","focus","trigger"],"mappings":"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","sourcesContent":["define(['jquery', 'core/log', 'core/ajax', 'mod_poodlltime/definitions', 'mod_poodlltime/pollyhelper'], function($, log, ajax, def, polly) {\n  \"use strict\"; // jshint ;_;\n\n  log.debug('Poodll Time dictation chat: initialising');\n\n  return {\n\n      //for making multiple instances\n      clone: function () {\n          return $.extend(true, {}, this);\n      },\n\n      usevoice: 'Amy',\n\n\n      init: function(index, itemdata, quizhelper) {\n      var self = this;\n      self.itemdata = itemdata;\n      self.quizhelper = quizhelper;\n      self.index = index;\n      self.register_events();\n      self.setvoice();\n      self.getItems();\n    },\n    next_question:function(){\n      var self=this;\n      var stepdata = {};\n      stepdata.index = self.index;\n      stepdata.hasgrade = true;\n      stepdata.totalitems=self.items.length;\n      stepdata.correctitems=self.items.filter(function(e) {return e.correct;}).length;\n      stepdata.grade = Math.round((stepdata.totalitems/stepdata.correctitems)*100);\n      self.quizhelper.do_next(stepdata);\n    },\n\n    register_events: function() {\n\n      var self = this;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .poodlltime_nextbutton\").on('click', function(e) {\n        self.next_question();\n      });\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_start_btn\").on(\"click\", function() {\n        self.start();\n      });\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_listen_btn\").on(\"click\", function() {\n        self.items[self.game.pointer].audio.load();\n        self.items[self.game.pointer].audio.play();\n      });\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_skip_btn\").on(\"click\", function() {\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", true);\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_speech.dictate_teacher_left\").text(self.items[self.game.pointer].target + \"\");\n        setTimeout(function() {\n          if (self.game.pointer < self.items.length - 1) {\n            self.items[self.game.pointer].answered = true;\n            self.items[self.game.pointer].correct = false;\n            self.game.pointer++;\n            self.nextPrompt();\n          } else {\n            self.end();\n          }\n        }, 3000);\n      });\n\n      \n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_check_btn\").on(\"click\", function() {\n        self.check_answer();\n      });\n      \n      $(\"body\").on(\"keydown\",\".dictate_targetWord\", function(e) {\n        if(e.which==13){\n          self.check_answer();\n        }\n      });\n      \n    },\n    spliton: new RegExp('([,.!?:;\" ])', 'g'),\n    game: {\n      pointer: 0\n    },\n\n    check_answer: function(){\n      var self = this;\n      var passage = self.items[self.game.pointer].target;\n      var transcriptArray = [];\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord\").each(function() {\n        transcriptArray.push($(this).val().trim() == \"\" ? \"|\" : $(this).val().trim());\n      });\n\n      var transcript = transcriptArray.join(\" \");\n\n      self.getComparison(passage, transcript, function(comparison) {\n        self.gotComparison(comparison, transcript);\n      });\n    },\n    setvoice: function() {\n      var self = this;\n\n      //f we have a specified voice, we use it.\n      if((self.itemdata.usevoice) && self.itemdata.usevoice!=='Auto'){\n        self.usevoice = self.itemdata.usevoice;\n        return;\n      }\n\n    //otherwise we get a random one\n      var voices = [];\n      switch (self.itemdata.language) {\n        case \"en-US\":\n          voices = ['Joey','Justin','Matthew','Ivy', 'Joanna','Kendra','Kimberly','Salli'];\n          break;\n        case \"en-GB\":\n          voices = ['Brian','Amy', 'Emma'];\n          break;\n        case \"en-AU\":\n          voice = ['Russell','Nicole'];\n          break;\n        case \"en-IN\":\n          voices = ['Aditi','Raveena'];\n          break;\n        case \"en-WL\":\n          voices = ['Geraint','Gwyneth'];\n          break;\n        case \"da-DK\":\n          voices =['Mads','Naja'];\n          break;\n        case \"nl-NL\":\n          voice = ['Ruben' , 'Lotte'];\n          break;\n        case \"fr-FA\":\n          voices= ['Mathieu','Celine'];\n          break;\n        case \"fr-CA\":\n          voices =['Chantal'];\n          break;\n        case \"de-DE\":\n          voices = ['Hans','Marlene'];\n          break;\n        case \"id-ID\":\n          voices =['Karl','Dora'];\n          break;\n        case \"it-IT\":\n          voices =['Carla','Giorgio'];\n          break;\n        case \"ja-JP\":\n          voices = ['Takumi','Mizuki'];\n          break;\n        case \"ko-KR\":\n          voices =['Seoyan'];\n          break;\n        case \"Norwegian\":\n          voices = ['Liv'];\n          break;\n        case \"Polish\":\n          voices = ['Jacek', 'Ewa'];\n          break;\n        case \"pr-BR\":\n          voices =['Ricardo','Vitoria'];\n          break;\n        case \"pr-PT\":\n          voices = ['Cristiano','Ines'];\n          break;\n        case \"Romanian\":\n          voices = ['Carmen','Carmen'];\n          break;\n        case \"ru-RU\":\n          voices = ['Maxim','Tatyana'];\n          break;\n        case \"es-ES\":\n          voices =['Enrique','Conchita'];\n          break;\n        case \"es-US\":\n          voices = ['Miguel','Penelope'];\n          break;\n        case \"Swedish\":\n          voices = ['Astrid', 'Astrid'];\n          break;\n        case \"tr-TR\":\n          voices =['Filiz','Filiz'];\n\n          break;\n        default:\n          voices = ['Brian','Amy'];\n      }\n      self.usevoice = voices[Math.floor(Math.random() * voices.length)];\n    },\n    getItems: function() {\n      var self = this;\n\n      var text_items = self.itemdata.customtext1.split(\"\\n\");\n\n      self.items = text_items.map(function(target) {\n        return {\n          dictate_targetWords: target.trim().split(self.spliton).filter(function(e) {\n            return e !== \"\";\n          }),\n          target: target,\n          typed: \"\",\n          answered: false,\n          correct: false,\n          audio: null\n        };\n      }).filter(function(e) {\n        return e.target !== \"\";\n      });\n\n      $.each(self.items, function(index, item) {\n        polly.fetch_polly_url(item.target, 'text', self.usevoice).then(function(audiourl) {\n          item.audio = new Audio();\n          item.audio.src = audiourl;\n          if (self.items.filter(function(e) {\n              return e.audio == null\n            }).length == 0) {\n            self.appReady();\n          } else {\n            console.log(self.items);\n          }\n        });\n\n      });\n\n    },\n    appReady: function() {\n      var self = this;\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_not_loaded\").hide();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_loaded\").show();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_start_btn\").prop(\"disabled\", false);\n    },\n    gotComparison: function(comparison, typed) {\n\n      var self = this;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord\").removeClass(\"dictate_correct dictate_incorrect\");\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback\").removeClass(\"fa fa-check fa-times\");\n\n      var allCorrect = comparison.filter(function(e) {\n        return !e.matched;\n      }).length == 0;\n\n      if (allCorrect) {\n\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord\").addClass(\"dictate_correct\").prop(\"disabled\",true);\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback\").addClass(\"fa fa-check\");\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_speech.dictate_teacher_left\").text(self.items[self.game.pointer].target + \"\");\n\n        self.items[self.game.pointer].answered = true;\n        self.items[self.game.pointer].correct = true;\n        self.items[self.game.pointer].typed = typed;\n\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", true);\n        if (self.game.pointer < self.items.length - 1) {\n          setTimeout(function() {\n            self.game.pointer++;\n            self.nextPrompt();\n          }, 3000);\n        } else {\n          setTimeout(function() {\n            self.end();\n          }, 3000);\n        }\n\n      } else {\n\n        comparison.forEach(function(obj) {\n          if (!obj.matched) {\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord[data-idx='\" + obj.wordnumber + \"']\").addClass(\"dictate_incorrect\");\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback[data-idx='\" + obj.wordnumber + \"']\").addClass(\"fa fa-times\");\n          } else {\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord[data-idx='\" + obj.wordnumber + \"']\").addClass(\"dictate_correct\").prop(\"disabled\",true);\n            $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_feedback[data-idx='\" + obj.wordnumber + \"']\").addClass(\"fa fa-check\");\n          }\n        });\n\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_reply_\" + self.game.pointer).effect(\"shake\", function() {\n          $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", false);\n        });\n\n      }\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_targetWord.dictate_correct\").each(function() {\n        var realidx = $(this).data(\"realidx\");\n        var dictate_targetWord = self.items[self.game.pointer].dictate_targetWords[realidx];\n        $(this).val(dictate_targetWord);\n      });\n\n    },\n    getWords: function(thetext) {\n      var self = this;\n      var checkcase = false;\n      if (checkcase == 'false') {\n        thetext = thetext.toLowerCase();\n      }\n      var chunks = thetext.split(self.spliton).filter(function(e) {\n        return e !== \"\";\n      });\n      var words = [];\n      for (var i = 0; i < chunks.length; i++) {\n        if (!chunks[i].match(self.spliton)) {\n          words.push(chunks[i]);\n        }\n      }\n      return words;\n    },\n    getComparison: function(passage, transcript, callback) {\n        var self = this;\n\n        $(\".dictate_ctrl-btn\").prop(\"disabled\", true);\n\n        ajax.call([{\n            methodname: 'mod_poodlltime_compare_passage_to_transcript',\n            args: {\n                passage: passage,\n                transcript: transcript,\n                alternatives: '',\n                language: self.itemdata.language\n            },\n            done: function(ajaxresult) {\n                var payloadobject = JSON.parse(ajaxresult);\n                if (payloadobject) {\n                    callback(payloadobject);\n                } else {\n                    callback(false);\n                }\n            },\n            fail: function(err) {\n                console.log(err);\n            }\n        }]);\n\n    },\n\n    end: function() {\n      var self = this;\n\n      var numCorrect = self.items.filter(function(e) {\n        return e.correct;\n      }).length;\n\n      var totalNum = self.items.length;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_results\").html(\"TOTAL<br/>\" + numCorrect + \"/\" + totalNum).show();\n      \n      $(\".poodlltime_nextbutton\").prop(\"disabled\",true);\n      setTimeout(function() {\n        $(\".poodlltime_nextbutton\").prop(\"disabled\",false);\n        self.next_question();\n      }, 2000);\n      \n\n    },\n    start: function() {\n      var self = this;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", true);\n\n      self.items.forEach(function(item) {\n        item.spoken = \"\";\n        item.answered = false;\n        item.correct = false;\n      });\n\n      self.game.pointer = 0;\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_game\").show();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_start_btn\").hide();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_mainmenu\").hide();\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_controls\").show();\n\n      self.nextPrompt();\n\n    },\n    nextPrompt: function() {\n\n      var self = this;\n\n      var target = self.items[self.game.pointer].target;\n      var code = \"<div class='dictate_prompt dictate_prompt_\" + self.game.pointer + \"' style='display:none;'>\";\n\n      code += \"<i class='fa fa-graduation-cap dictate_speech-icon-left'></i>\";\n      code += \"<div style='margin-left:90px;' class='dictate_speech dictate_teacher_left'>\";\n      code += target.replace(/[^a-zA-Z0-9 ]/g, '').replace(/[a-zA-Z0-9]/g, '•');\n      code += \"</div>\";\n      code += \"</div>\";\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_game\").html(code);\n      $(\".dictate_ctrl-btn\").prop(\"disabled\", false);\n\n      var color;\n\n      var progress = self.items.map(function(item, idx) {\n        color = \"gray\";\n        if (self.items[idx].answered && self.items[idx].correct) {\n          color = \"green\";\n        } else if (self.items[idx].answered && !self.items[idx].correct) {\n          color = \"red\";\n        }\n        return \"<i style='color:\" + color + \"' class='fa fa-circle'></i>\";\n      }).join(\" \");\n\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_title\").html(progress);\n      $(\".dictate_prompt_\" + self.game.pointer).toggle(\"slide\", {\n        direction: 'left'\n      });\n\n      self.nextReply();\n\n    },\n    nextReply: function() {\n      var self = this;\n      var target = self.items[self.game.pointer].target;\n      var code = \"<div class='dictate_reply dictate_reply_\" + self.game.pointer + \"' style='display:none;'>\";\n      code += \"<i class='fa fa-user dictate_speech-icon-right'></i>\";\n      var dictate_targetWordsCode = \"\";\n      var idx = 1;\n      self.items[self.game.pointer].dictate_targetWords.forEach(function(word, realidx) {\n        if (!word.match(self.spliton)) {\n          dictate_targetWordsCode += \"<ruby><input type='text' maxlength='\" + word.length + \"' size='\" + (word.length + 1) + \"' class='dictate_targetWord' data-realidx='\" + realidx + \"' data-idx='\" + idx + \"'><rt><i data-idx='\" + idx + \"' class='dictate_feedback'></i></rt></ruby>\";\n          idx++;\n        } else {\n          dictate_targetWordsCode += word;\n        }\n      });\n      code += \"<div style='margin-right:90px;' class='dictate_speech dictate_right'>\" + dictate_targetWordsCode + \"</div>\";\n      code += \"</div>\";\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_game\").append(code);\n      $(\".dictate_reply_\" + self.game.pointer).toggle(\"slide\", {\n        direction: 'right'\n      });\n      $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_ctrl-btn\").prop(\"disabled\", false);\n      setTimeout(function() {\n        $(\".dictate_targetWord\").first().focus();\n        $(\"#\" + self.itemdata.uniqueid + \"_container .dictate_listen_btn\").trigger('click');\n      }, 500);\n    }\n\n  };\n});"],"file":"dictationchat.min.js"}