define(["jquery","core/log","core/str","core/modal_factory","core/modal_events","core/ajax","core/notification"],function(a,b,c,d,e,f,g){var h=function(a,b,c,d){this.contextid=b,this.formname=c,this.callback=d,this.preinit(a)};return h.prototype.modal=null,h.prototype.contextid=-1,h.prototype.itemname="",h.prototype.itemid=-1,h.prototype.formname="",h.prototype.formmessage="Really delete:",h.prototype.preinit=function(b){var f=(a(b),this);c.get_string(this.formname,"mod_poodlltime").then(function(a){f.formtitle=a}),c.get_string(this.formname+"_message","mod_poodlltime").then(function(a){f.formmessage=a}),c.get_string("deletebuttonlabel","mod_poodlltime").then(function(a){f.deletebuttonlabel=a}),a("body").on("click",b,function(b){b.preventDefault();var c=a(b.currentTarget),g=c.data("id");f.itemid=g;var h=c.data("name");d.create({type:d.types.SAVE_CANCEL,title:f.formtitle,body:f.formmessage+"<i>"+h+"</i>"}).then(function(a){f.modal=a,f.modal.setSaveButtonText(f.deletebuttonlabel);var b=f.modal.getRoot();return b.on(e.save,f.submitForm.bind(f)),f.modal.show(),f.modal})})},h.prototype.submitForm=function(a){a.preventDefault();var c=this;b.debug("deleting:"+c.formname),f.call([{methodname:"mod_poodlltime_delete_item",args:{itemid:c.itemid,contextid:c.contextid,formname:c.formname},done:function(a){var d=JSON.parse(a);if(d)switch(b.debug(d),d.error){case!1:c.callback(c.itemid);break;case!0:default:b.debug("that was an error: ")}c.modal.hide()},fail:g.exception}])},{init:function(a,b,c,d){return new h(a,b,c,d)}}});